# DPB-010: 実行対象の学会を選定するロジックの実装

## 基本情報

| 項目       | 内容                                   |
| ---------- | -------------------------------------- |
| タスクID   | DPB-010                                |
| タスク名   | 実行対象の学会を選定するロジックの実装 |
| Phase      | Phase 3: 拡張機能                      |
| 優先度     | 高                                     |
| ステータス | 未着手                                 |
| 関連機能ID | -                                      |
| 関連画面ID | -                                      |

## 概要

設定ファイルから読み込んだ複数の学会リストの中から、その日に実行対象とする学会をランダムに1つだけ選定する機能を実装します。

## やること

- [ ] `internal/venueselector` パッケージを新規作成する。
- [ ] `VenueSelector` インターフェースと、ランダムに選定する `RandomVenueSelector` を実装する。
- [ ] `config.VenueConfig` のスライスを受け取り、ランダムに1つの `config.VenueConfig` を返す `Select` メソッドを実装する。
- [ ] ユニットテストを実装し、リストの中からランダムに1つが選ばれることを確認する。

## 方針

- `selector` パッケージと同様に、将来的に「開催が近い学会を優先する」などの別の選定戦略を追加できるよう、インターフェースベースで設計する。
- 乱数生成には `math/rand` を利用し、テストで結果を固定できるようにする。

## 方法

### 1. VenueSelectorの実装

```go
// internal/venueselector/random.go
package venueselector

import (
	"errors"
	"math/rand"
	"time"

	"github.com/hayashi-yaken/daily-paper-bot/internal/config"
)

var ErrNoVenues = errors.New("no venues to select from")

// VenueSelector は実行対象の学会を選定するインターフェースです。
type VenueSelector interface {
	Select(venues []config.VenueConfig) (config.VenueConfig, error)
}

// RandomVenueSelector はランダムに学会を選定します。
type RandomVenueSelector struct {
	rand *rand.Rand
}

// NewRandomVenueSelector は新しいRandomVenueSelectorを生成します。
func NewRandomVenueSelector() VenueSelector {
	return &RandomVenueSelector{
		rand: rand.New(rand.NewSource(time.Now().UnixNano())),
	}
}

// Select は学会のリストからランダムに1つを選びます。
func (s *RandomVenueSelector) Select(venues []config.VenueConfig) (config.VenueConfig, error) {
	if len(venues) == 0 {
		return config.VenueConfig{}, ErrNoVenues
	}

	selectedIndex := s.rand.Intn(len(venues))
	return venues[selectedIndex], nil
}
```

## 成果物

- [ ] `internal/venueselector` パッケージ
- [ ] `RandomVenueSelector` の実装とユニットテスト

## 依存タスク

- DPB-009: 複数学会対応のための設定機能改修

## 後続タスク

- DPB-011: 複数学会対応のメインプロセス統合
