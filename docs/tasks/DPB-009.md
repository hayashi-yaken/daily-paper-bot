# DPB-009: 複数学会対応のための設定機能改修 (ファイルベース)

## 基本情報

| 項目       | 内容                                              |
| ---------- | ------------------------------------------------- |
| タスクID   | DPB-009                                           |
| タスク名   | 複数学会対応のための設定機能改修 (ファイルベース) |
| Phase      | Phase 3: 拡張機能                                 |
| 優先度     | 高                                                |
| ステータス | 完了                                              |
| 関連機能ID | -                                                 |
| 関連画面ID | -                                                 |

## 概要

複数の学会（ICLR, ICML, NeurIPSなど）を対象にできるように、単一の学会しか扱えなかった設定機能を拡張します。これまでの環境変数ベースではなく、専用のJSON設定ファイル (`config/venues.json`) から複数の学会情報を読み込むように変更します。

## やること

- [x] `assets/venues.json` ファイルを新規作成し、学会リストを定義する。
- [x] `internal/config` の `Config` 構造体を変更し、Venue情報のスライスを保持できるようにする。
- [x] `config.go` の `Load` 関数を、`config/venues.json` を読み込んでパースするように修正する。
- [x] 関連する環境変数 (`OR_VENUE`, `OR_YEAR`, `OR_VENUE_URL`) の定義をプロジェクトから削除する。
- [x] `main.go` で設定を読み込んでいる部分のコンパイルエラーを一時的に修正する。

## 方針

- 学会情報は、名前、API用のvenue ID、年、ウェブページのURLなどを含む構造体として定義する。
- 設定をファイルに分離することで、可読性とメンテナンス性を向上させる。

## 方法

### 1. `assets/venues.json` の作成

```json
// assets/venues.json
[
  {
    "name": "ICLR",
    "venue": "ICLR.cc/2025/Conference",
    "year": 2025,
    "venueURL": "https://openreview.net/group?id=ICLR.cc/2025/Conference"
  },
  {
    "name": "NeurIPS",
    "venue": "NeurIPS.cc/2025/Conference",
    "year": 2025,
    "venueURL": "https://openreview.net/group?id=NeurIPS.cc/2025/Conference"
  }
]
```

### 2. `config.go` の修正

```go
// internal/config/config.go

// VenueConfig は一つの学会に関する設定を保持します。
type VenueConfig struct {
    // ... (変更なし)
}

// Config 構造体を修正
type Config struct {
	Venues []VenueConfig
    // ... (変更なし)
}

var venuesConfigPath = "assets/venues.json"

func Load() (*Config, error) {
	cfg := &Config{}

	// assets/venues.json から学会リストを読み込む
	bytes, err := os.ReadFile(venuesConfigPath)
	if err != nil {
		return nil, fmt.Errorf("failed to read venues config file: %w", err)
	}
	if err := json.Unmarshal(bytes, &cfg.Venues); err != nil {
		return nil, fmt.Errorf("failed to parse venues config file: %w", err)
	}
    if len(cfg.Venues) == 0 {
		return nil, fmt.Errorf("no venues found in %s", venuesConfigPath)
	}

	// (その他の設定読み込み処理)
	// ...

	return cfg, nil
}
```

## 成果物

- [x] `assets/venues.json` ファイル
- [x] ファイルから複数学会を扱えるように更新された `internal/config` パッケージ
- [x] ユニットテストの修正

## 依存タスク

なし

## 後続タスク

- DPB-010: 実行対象の学会を選定するロジックの実装
- DPB-011: 複数学会対応のメインプロセス統合
